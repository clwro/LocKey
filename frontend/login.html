<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/responsivo.css">
    <link rel="stylesheet" href="css/login.css">
    <!-- AXIOS -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="page">
        <form method="POST" class="formLogin" onsubmit="event.preventDefault(); Logar();">
            <div class="logo">
                <h1>Login</h1>
                <img src="img/LK.png" id="headerLogo" height="80">
            </div>
            <label for="email">E-mail</label>
            <input id="email" type="email" placeholder="Digite seu e-mail" autofocus="true" required />
            <label for="password">Senha</label>
            <input id="password" type="password" placeholder="Digite sua senha" required />
            <div class="links">
                <a href="/">Esqueci minha senha</a>
                <a href="register.html">Não tenho conta</a>
            </div>
            <input type="submit" value="Acessar" class="btn" />
        </form>
    </div>
    <script type="text/javascript">
        function Logar() {
    // Recebe os dados do usuário.
    const email = document.querySelector('#email').value;
    const senha = document.querySelector('#password').value;

    // Verifica os dados.
    if (!email || !senha) {
        return alert('Por favor, complete os campos.');
    }

    // Envia os dados para o servidor.
    axios.get(`http://localhost:8080/api/usuarios/login`, {
        params: {
            login: email,
            senha: senha,
        }
    })
    .then(response => {
       
        if (response.status === 200) {
            window.location.href= "usuario.html";
        }
    })
    .catch(error => {
        alert('Email ou senha incorretos.');
        console.error(error);
    });
}
    </script>
</body>
</html>